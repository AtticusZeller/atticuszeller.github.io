allow-lan: true
# https://wiki.metacubex.one/config/dns/
# https://gist.github.com/liuran001/5ca84f7def53c70b554d3f765ff86a33
dns:
  default-nameserver:
    - 223.5.5.5
    - 223.6.6.6
    - '[2402:4e00::]'
    - '[2400:3200::1]'
  enable: true
  enhanced-mode: fake-ip
  fake-ip-filter:
    - '*.lan'
    - +.local
  fake-ip-filter-mode: blacklist
  ipv6: true
  listen: 0.0.0.0:1053
  # cloudflare DoT and DoH
  nameserver:
    - tls://1.1.1.1
    - tls://1.0.0.1
    - tls://[2606:4700:4700::1111]
    - tls://[2606:4700:4700::1001]
    - https://1.1.1.1/dns-query
    - https://1.0.0.1/dns-query
    - https://[2606:4700:4700::1111]/dns-query
    - https://[2606:4700:4700::1001]/dns-query
  nameserver-policy:
    geosite:cn,private:
      - https://223.5.5.5/dns-query
      - https://223.6.6.6/dns-query
  prefer-h3: true
external-controller: 127.0.0.1:9097
external-controller-cors:
  allow-origins:
    - '*'
  allow-private-network: true
geo-auto-update: true
geo-update-interval: 24
geodata-loader: standard
# https://github.com/MetaCubeX/meta-rules-dat/tree/master
geodata-mode: true
geox-url:
  asn: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/GeoLite2-ASN.mmdb
  geoip: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip.dat
  geosite: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/country.mmdb
global-client-fingerprint: firefox
ipv6: true
# https://github.com/vernesong/OpenClash/issues/2614
keep-alive-interval: 60
log-level: info
mixed-port: 45629
# https://wiki.metacubex.one/config/general/
mode: rule
profile:
  store-fake-ip: true
  store-selected: true
proxy-groups:
  - name: ğŸ”° Node
    proxies:
      - â™»ï¸ Auto-tcp
      - â™»ï¸ Auto-ws
      - â˜ï¸ Cloudflare
      - ğŸ¯ Direct
    type: select
  - include-all-proxies: true
    interval: 300
    lazy: true
    name: â™»ï¸ Auto-tcp
    type: url-test
    url: https://cp.cloudflare.com
    use:
      - vless-tcp-xtls-vision
  - include-all-proxies: true
    interval: 300
    lazy: true
    name: â™»ï¸ Auto-ws
    type: url-test
    url: https://cp.cloudflare.com
    use:
      - vless-ws-tls-cdn
  - include-all-proxies: true
    interval: 300
    lazy: true
    name: â˜ï¸ Cloudflare
    type: url-test
    url: https://cp.cloudflare.com
    use:
      - vless-ws-cdn-worker
  - name: ğŸ¯ Direct
    proxies:
      - DIRECT
      - â™»ï¸ Auto-tcp
      - â™»ï¸ Auto-ws
      - â˜ï¸ Cloudflare
    type: select
  - name: ğŸŸ Remaining
    proxies:
      - ğŸ”° Node
      - ğŸ¯ Direct
    type: select
  - name: â›”ï¸ Ads
    proxies:
      - REJECT
      - ğŸ¯ Direct
      - ğŸ”° Node
    type: select
# https://wiki.metacubex.one/config/proxy-providers/
proxy-providers:
  vless-tcp-xtls-vision:
    interval: 86400
    override:
      mptcp: true
      skip-cert-verify: true
      tfo: true
      udp: true
    path: ./proxy_providers/vps-tcp.yaml
    proxy: DIRECT
    type: http
    url: https://raw.atticuszeller.club/AtticusZeller/atticuszeller.github.io/refs/heads/main/atticuszeller/CS/OS/Proxy/vless-tcp-xtls-vision.yml
  vless-ws-cdn-worker:
    interval: 86400
    override:
      mptcp: true
      skip-cert-verify: true
      tfo: true
      udp: false
    path: ./proxy_providers/cdn.yaml
    proxy: DIRECT
    type: http
    url: https://raw.atticuszeller.club/AtticusZeller/atticuszeller.github.io/refs/heads/main/atticuszeller/CS/OS/Proxy/vless-ws-cdn-worker.yml
  vless-ws-tls-cdn:
    interval: 86400
    override:
      mptcp: true
      skip-cert-verify: true
      tfo: true
      udp: true
    path: ./proxy_providers/vps-ws.yaml
    proxy: DIRECT
    type: http
    url: https://raw.atticuszeller.club/AtticusZeller/atticuszeller.github.io/refs/heads/main/atticuszeller/CS/OS/Proxy/vless-ws-tls-cdn.yml
# https://github.com/Loyalsoldier/clash-rules
# https://wiki.metacubex.one/config/rule-providers/
rule-providers:
  direct:
    behavior: domain
    interval: 86400
    path: ./ruleset/direct.yaml
    type: http
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt
  proxy:
    behavior: domain
    interval: 86400
    path: ./ruleset/proxy.yaml
    type: http
    url: https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt
# https://wiki.metacubex.one/config/general/#geo
# https://github.com/MetaCubeX/meta-rules-dat/tree/master
# https://wiki.metacubex.one/config/rules/
rules:
  # DNS direct
  ## cloudflare
  - IP-CIDR,1.1.1.1/32,ğŸ”° Node,no-resolve
  - IP-CIDR,1.0.0.1/32,ğŸ”° Node,no-resolve
  - IP-CIDR6,2606:4700:4700::1111/128,ğŸ”° Node,no-resolve
  - IP-CIDR6,2606:4700:4700::1001/128,ğŸ”° Node,no-resolve
  ## alidns
  - IP-CIDR,223.5.5.5/32,ğŸ¯ Direct,no-resolve
  - IP-CIDR,223.6.6.6/32,ğŸ¯ Direct,no-resolve
  - IP-CIDR6,2400:3200::1/128,ğŸ¯ Direct,no-resolve
  - IP-CIDR6,2400:3200:baba::1/128,ğŸ¯ Direct,no-resolve
  - DOMAIN-SUFFIX,cloudflare-dns.com,ğŸ”° Node
  - DOMAIN-SUFFIX,dns.alidns.com,ğŸ¯ Direct
  # local
  - GEOIP,private,ğŸ¯ Direct,no-resolve
  - GEOSITE,private,ğŸ¯ Direct
  # global
  - GEOSITE,github,ğŸ”° Node
  - GEOSITE,python,ğŸ”° Node
  - GEOSITE,ubuntu,ğŸ”° Node
  - GEOSITE,cloudflare,ğŸ”° Node
  - GEOSITE,onedrive,ğŸ”° Node
  - GEOSITE,microsoft,ğŸ”° Node
  - GEOSITE,youtube,ğŸ”° Node
  - GEOSITE,spotify,ğŸ”° Node
  - GEOSITE,google,ğŸ”° Node
  - GEOSITE,reddit,ğŸ”° Node
  - DOMAIN-SUFFIX,obsidian.md,ğŸ”° Node
  - GEOSITE,protonmail,ğŸ”° Node
  - GEOSITE,openai,ğŸ”° Node
  - GEOIP,telegram,ğŸ”° Node,no-resolve
  - GEOSITE,apple,ğŸ”° Node
  - GEOSITE,category-dev,ğŸ”° Node
  - GEOSITE,category-scholar-!cn,ğŸ”° Node
  - GEOSITE,geolocation-!cn,ğŸ”° Node
  - RULE-SET,proxy,ğŸ”° Node
  # Chinese domains and IPs
  - GEOIP,CN,ğŸ¯ Direct,no-resolve
  - GEOSITE,cn,ğŸ¯ Direct
  - RULE-SET,direct,ğŸ¯ Direct
  # web panel
  - DOMAIN,metacubexd.pages.dev,ğŸ¯ Direct
  # Rejsect
  - GEOSITE,category-porn,â›”ï¸ Ads
  - GEOSITE,category-ads-all,â›”ï¸ Ads
  - MATCH,ğŸŸ Remaining
secret: ''
tcp-concurrent: true
tun:
  auto-detect-interface: true
  auto-route: true
  device: Meta
  dns-hijack:
    - any:53
  enable: true
  mtu: 9000
  stack: gvisor
  strict-route: true
unified-delay: true
